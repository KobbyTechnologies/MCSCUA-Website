{% extends 'base.html' %}
{% load static %}
{% block title %} Blog {% endblock title %}

{% block body %}
<section class="hero">
    <div class="hero__title">
        <h1>Home / Blog</h1>
    </div>
</section>
<div class="grid">
    <main class="grid__main">
        <div class="grid__main--item">
            <ul class="cards">
                {% for post in post_list %}
                <li class="card">
                    <a href="{% url 'post_detail' post.slug  %}">

                        <div class="card__img">
                            <div class="img__cover">
                                <img src="{{ post.image.url }}" alt="" />
                            </div>
                        </div>
                        <div class="[ card__text ] [ flow ]">
                            <h2>
                                <span>{{ post.title }}</span>
                            </h2>

                            <p>{{ post.content |safe | truncatewords_html:20 }}</p>
                            <small>
                                <span class="visuallyhidden">Uploaded | </span>
                                {{ post.created_on | date }}
                            </small>
                        </div>
                    </a>
                </li>
                {% endfor %}

            </ul>
        </div>

        <div class="">
            {% if is_paginated %}
            <div class="pagination">

                <div class="nav-links">

                    {% if page_obj.has_previous %}
                    <a class="page-numbers" href="?page=1">&laquo; First</a>
                    <a class="page-numbers" href="?page={{ page_obj.previous_page_number }}">previous</a>
                    {% endif %}

                    <a class="page-numbers current" href="?page={{ page_obj.current_page_number }}"> Page
                        {{ page_obj.number}} of {{page_obj.paginator.num_pages}} </a>

                    {% if page_obj.has_next %}
                    <a class="page-numbers" href="?page={{ page_obj.next_page_number }}">Next &raquo;</a>
                    <a class="page-numbers" href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
                    {% else %}
                    <a class="page-numbers current" href="?page={{ page_obj.paginator.num_pages }}">Last </a>
                    {% endif %}
                </div>

            </div>
            {% endif %}
        </div>



    </main>
    <aside class="grid__sidebar">
        {% include 'aside.html' %}
    </aside>
</div>



{% endblock body %}

<!-- page counter in django -->

{% for page in page_obj.paginator.page_range %}

{% if forloop.counter != 1 %} {% endif %}

<a href="?page={{ page }}">{{ page }}</a>

{% endfor %}